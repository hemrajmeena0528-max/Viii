<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Baccha ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body, html{width:100%;height:100%;overflow:hidden;font-family:'Segoe UI',sans-serif;}
.page{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:opacity 1s;opacity:0;pointer-events:none;}
.page.active{opacity:1;pointer-events:auto;}
canvas#stars, canvas#shootingStars{position:fixed;inset:0;z-index:0;}
button{padding:12px 25px;border:none;border-radius:25px;background:rgba(255,255,255,0.25);color:white;font-size:1em;cursor:pointer;backdrop-filter:blur(5px);}
.lock-box, .tap-box, .swipe-box, .gift-box, .wish-box{position:relative;z-index:2;text-align:center;}
h1,h2{color:white;margin-bottom:10px;}
.swipe-container{display:flex;gap:20px;overflow:hidden;}
.card{background:rgba(255,255,255,0.2);padding:20px 25px;border-radius:20px;min-width:120px;text-align:center;cursor:pointer;user-select:none;transition:0.3s;}
.gift-card{background:rgba(255,255,255,0.2);padding:15px 20px;border-radius:20px;cursor:pointer;margin-top:20px;}
.wish-text{font-family:'Dancing Script',cursive;font-size:1.5em;color:#ffecf0;line-height:1.6;text-align:center;max-width:90%;background:rgba(255,255,255,0.05);padding:20px;border-radius:15px;}
</style>
</head>
<body>

<!-- Page 1: Magic Begin -->
<div class="page active" id="page1" style="background:linear-gradient(135deg,#ff6a88,#ff4f7b,#d4145a);">
  <canvas id="stars"></canvas>
  <div class="lock-box">
    <h1 id="magicText" style="color:white;">Let the magic begin ‚ú®</h1>
    <button id="playBtn">üéµ Play Song</button>
  </div>
</div>

<!-- Page 2: Tap & Hold (Skipping countdown for testing) -->
<div class="page" id="page2" style="background:linear-gradient(135deg,#ff6a88,#ff4f7b,#d4145a);">
  <div class="tap-box">
    <h2>Tap and hold ‚ù§Ô∏è</h2>
    <div id="heart" style="font-size:3em;cursor:pointer;">‚ù§Ô∏è</div>
  </div>
</div>

<!-- Page 3: Swipe Cards -->
<div class="page" id="page3" style="background:linear-gradient(135deg,#ff6a88,#ff4f7b,#d4145a);">
  <div class="swipe-box">
    <h2>Swipe your troubles away</h2>
    <div class="swipe-container" id="swipeContainer">
      <div class="card">Bad Days</div>
      <div class="card">Stress</div>
      <div class="card">Overthinking</div>
    </div>
    <div class="gift-card" id="giftCard" style="display:none;">üéÅ Open Gift</div>
  </div>
</div>

<!-- Page 4: Final Wish -->
<div class="page" id="page4" style="background:linear-gradient(135deg,#ff6a88,#ff4f7b,#d4145a);">
  <canvas id="shootingStars"></canvas>
  <div class="wish-box">
    <div class="wish-text">
      Happy New Year, my Baccha ‚ù§Ô∏è<br>
      Each moment with you is a new beginning, and I can‚Äôt wait to create a thousand more memories with you this year. ‚ò∫Ô∏è<br>
      May our bond grow deeper, our laughter louder, and our dreams bigger in 2026.üòå<br>
      You‚Äôre my favorite part of every year. üí´
    </div>
  </div>
</div>

<audio id="song" preload="auto">
  <source src="song.mp3" type="audio/mpeg">
</audio>

<script>
const song=document.getElementById('song');
const playBtn=document.getElementById('playBtn');
const magicText=document.getElementById('magicText');
const page1=document.getElementById('page1');
const page2=document.getElementById('page2');
const page3=document.getElementById('page3');
const page4=document.getElementById('page4');

playBtn.addEventListener('click',()=>{
  song.play();
  playBtn.style.display='none';
  magicText.style.display='none'; // disappears immediately
  showPage(page2); // Skip countdown and go directly to Tap & Hold
});

// Page transition
function showPage(page){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));page.classList.add('active');}

// ---------------- TAP & HOLD HEART ----------------
const heart=document.getElementById('heart');
heart.addEventListener('mousedown',explodeHeart);
heart.addEventListener('touchstart',explodeHeart);

function explodeHeart(){
  for(let i=0;i<20;i++){
    const h=document.createElement('div');
    h.innerText='‚ù§Ô∏è';
    h.style.position='absolute';
    h.style.left=heart.offsetLeft+'px';
    h.style.top=heart.offsetTop+'px';
    h.style.fontSize=(Math.random()*30+10)+'px';
    h.style.animation=`fly${i} 1s forwards`;
    page2.appendChild(h);
    setTimeout(()=>h.remove(),1000);
  }
  setTimeout(()=>showPage(page3),1200);
}

// ---------------- SWIPE CARDS ----------------
const swipeContainer=document.getElementById('swipeContainer');
const cards=[...swipeContainer.children];
let swipedCount=0;
cards.forEach(card=>{
  let startX=0;
  card.addEventListener('touchstart',e=>{startX=e.touches[0].clientX;});
  card.addEventListener('touchend',e=>{
    let endX=e.changedTouches[0].clientX;
    if(Math.abs(endX-startX)>50){
      card.style.transform='translateX('+(endX>startX?200:-200)+'px)';
      card.style.opacity='0';
      swipedCount++;
      if(swipedCount===cards.length) document.getElementById('giftCard').style.display='block';
    }
  });
  card.addEventListener('mousedown',e=>{startX=e.clientX;});
  card.addEventListener('mouseup',e=>{
    let endX=e.clientX;
    if(Math.abs(endX-startX)>50){
      card.style.transform='translateX('+(endX>startX?200:-200)+'px)';
      card.style.opacity='0';
      swipedCount++;
      if(swipedCount===cards.length) document.getElementById('giftCard').style.display='block';
    }
  });
});

// ---------------- GIFT CARD ----------------
document.getElementById('giftCard').addEventListener('click',()=>{showPage(page4);startShootingStars();});

// ---------------- CONSTELLATION CANVAS ----------------
const canvas=document.getElementById('stars');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let stars=[];
for(let i=0;i<50;i++){
  stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5+0.5});
}

function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<stars.length;i++){
    for(let j=i+1;j<stars.length;j++){
      let dx=stars[i].x-stars[j].x;
      let dy=stars[i].y-stars[j].y;
      let dist=Math.sqrt(dx*dx+dy*dy);
      if(dist<120){
        ctx.strokeStyle='rgba(255,200,220,0.4)';
        ctx.lineWidth=0.5;
        ctx.beginPath();
        ctx.moveTo(stars[i].x,stars[i].y);
        ctx.lineTo(stars[j].x,stars[j].y);
        ctx.stroke();
      }
    }
  }
  for(let i=0;i<stars.length;i++){
    ctx.beginPath();
    ctx.arc(stars[i].x,stars[i].y,stars[i].r,0,Math.PI*2);
    ctx.fillStyle='rgba(255,150,180,0.8)';
    ctx.fill();
  }
  requestAnimationFrame(drawStars);
}
drawStars();
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

// ---------------- SHOOTING STARS ----------------
function startShootingStars(){
  const canvas2=document.getElementById('shootingStars');
  canvas2.width=window.innerWidth; canvas2.height=window.innerHeight;
  const ctx2=canvas2.getContext('2d');
  let stars2=[];
  for(let i=0;i<5;i++){
    stars2.push({x:Math.random()*canvas2.width,y:Math.random()*canvas2.height,length:Math.random()*80+20});
  }
  function animate(){
    ctx2.clearRect(0,0,canvas2.width,canvas2.height);
    stars2.forEach(s=>{
      ctx2.beginPath();
      ctx2.strokeStyle='rgba(255,230,240,0.8)';
      ctx2.moveTo(s.x,s.y);
      ctx2.lineTo(s.x+s.length,s.y+s.length*0.2);
      ctx2.stroke();
      s.x+=4; s.y+=1;
      if(s.x>canvas2.width){s.x=-50; s.y=Math.random()*canvas2.height;}
    });
    requestAnimationFrame(animate);
  }
  animate();
  // Falling hearts
  setInterval(()=>{
    const h=document.createElement('div'); h.innerText='‚ù§Ô∏è';
    h.style.position='absolute'; h.style.left=Math.random()*window.innerWidth+'px';
    h.style.top='-50px'; h.style.fontSize=(Math.random()*20+10)+'px';
    h.style.animation='fall 4s linear forwards';
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),4000);
  },300);
}

const style=document.createElement('style');
style.innerHTML=`@keyframes fall{0%{transform:translateY(0)}100%{transform:translateY(100vh)}}`;
document.head.appendChild(style);
</script>

</body>
</html>